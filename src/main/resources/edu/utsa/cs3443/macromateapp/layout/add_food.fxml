<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="edu.utsa.cs3443.macromateapp.controller.FoodLibraryController"
            style="-fx-background-color: #f8fafc;">

    <left>
        <fx:include source="sidebar.fxml"/>
    </left>

    <center>
        <VBox spacing="14">
            <padding><Insets top="22" right="22" bottom="22" left="22"/></padding>

            <VBox spacing="4">
                <Label text="Add Food">
                    <font><Font size="26"/></font>
                </Label>
                <Label text="Pick an item and log how many servings you ate" style="-fx-text-fill: #6b7280;"/>
            </VBox>

            <HBox spacing="10">
                <TextField fx:id="searchField" promptText="Search by name, brand, or category..."
                           HBox.hgrow="ALWAYS"
                           style="-fx-background-color: white; -fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>
                <Button text="Search" onAction="#handleSearch"
                        style="-fx-background-color: #111827; -fx-text-fill: white; -fx-font-weight: 800; -fx-background-radius: 10; -fx-padding: 10 14;"/>
            </HBox>

            <HBox spacing="14" VBox.vgrow="ALWAYS">

                <VBox spacing="10" prefWidth="620"
                      style="-fx-background-color: white; -fx-background-radius: 14; -fx-border-color: #e5e7eb; -fx-border-radius: 14;">
                    <padding><Insets top="14" right="14" bottom="14" left="14"/></padding>
                    <Label text="All Foods" style="-fx-font-weight: 900;"/>
                    <ListView fx:id="foodsList" onMouseClicked="#handleSelectFood" VBox.vgrow="ALWAYS"/>
                </VBox>

                <VBox spacing="10" HBox.hgrow="ALWAYS"
                      style="-fx-background-color: white; -fx-background-radius: 14; -fx-border-color: #e5e7eb; -fx-border-radius: 14;">
                    <padding><Insets top="14" right="14" bottom="14" left="14"/></padding>

                    <Label fx:id="selectedFoodLabel" text="Select a food item to continue" style="-fx-font-weight: 900;"/>

                    <GridPane hgap="10" vgap="10">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="30"/>
                            <ColumnConstraints percentWidth="70"/>
                        </columnConstraints>

                        <Label text="Meal" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <ChoiceBox fx:id="mealTypeChoice" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                        <!-- //remark: ADDED log date row -->
                        <Label text="Log Date" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <DatePicker fx:id="logDatePicker" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                        <!-- //remark: shifted rows down by 1 (Servings rowIndex 1->2) -->
                        <Label text="Servings" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <TextField fx:id="servingsField" promptText="1" GridPane.rowIndex="2" GridPane.columnIndex="1"
                                   style="-fx-background-color: #f3f4f6; -fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: transparent;"/>

                        <!-- //remark: shifted rows down by 1 (Notes rowIndex 2->3) -->
                        <Label text="Notes" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                        <TextArea fx:id="notesArea" prefRowCount="4" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                    </GridPane>

                    <Button text="Add to Diary" onAction="#handleAddToDiary"
                            style="-fx-background-color: #3b82f6; -fx-text-fill: white; -fx-font-weight: 900; -fx-background-radius: 10; -fx-padding: 10 14;"/>

                    <Label fx:id="statusLabel" text="" visible="false" style="-fx-text-fill: #065f46; -fx-font-weight: 800;"/>
                    <Label fx:id="errorLabel" text="" visible="false" style="-fx-text-fill: #b91c1c; -fx-font-weight: 800;"/>
                </VBox>

            </HBox>
        </VBox>
    </center>
</BorderPane>


